<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="Describing the sources of our data and the cleaning process.">

<title>MA [46]15 Final Project Group 10 - SEDA Data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">MA [46]15 Final Project Group 10</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="./about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./big_picture.html" rel="" target="">
 <span class="menu-text">From Bay State to Magnolia State</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./analysis.html" rel="" target="">
 <span class="menu-text">Analysis</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./data.html" rel="" target="" aria-current="page">
 <span class="menu-text">SEDA Data</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#describe-wherehow-to-find-data" id="toc-describe-wherehow-to-find-data" class="nav-link active" data-scroll-target="#describe-wherehow-to-find-data">Describe where/how to find data</a></li>
  <li><a href="#our-datasets" id="toc-our-datasets" class="nav-link" data-scroll-target="#our-datasets">Our Datasets</a>
  <ul class="collapse">
  <li><a href="#first-dataset" id="toc-first-dataset" class="nav-link" data-scroll-target="#first-dataset">First Dataset</a>
  <ul class="collapse">
  <li><a href="#data-files-and-variables" id="toc-data-files-and-variables" class="nav-link" data-scroll-target="#data-files-and-variables">Data Files and Variables</a></li>
  <li><a href="#cleaning" id="toc-cleaning" class="nav-link" data-scroll-target="#cleaning">Cleaning</a></li>
  <li><a href="#summary-of-numerical-variables" id="toc-summary-of-numerical-variables" class="nav-link" data-scroll-target="#summary-of-numerical-variables">Summary of numerical variables</a></li>
  </ul></li>
  <li><a href="#second-dataset-adding-more-variables" id="toc-second-dataset-adding-more-variables" class="nav-link" data-scroll-target="#second-dataset-adding-more-variables">Second Dataset (Adding more variables)</a>
  <ul class="collapse">
  <li><a href="#data-files-and-variables-1" id="toc-data-files-and-variables-1" class="nav-link" data-scroll-target="#data-files-and-variables-1">Data Files and Variables</a></li>
  <li><a href="#summary-of-numerical-variables-1" id="toc-summary-of-numerical-variables-1" class="nav-link" data-scroll-target="#summary-of-numerical-variables-1">Summary of numerical variables</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">SEDA Data</h1>
</div>

<div>
  <div class="description">
    Describing the sources of our data and the cleaning process.
  </div>
</div>


<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p><img src="images/cepa-logo.jpg" class="img-fluid" style="width:100.0%"></p>
<section id="describe-wherehow-to-find-data" class="level1">
<h1>Describe where/how to find data</h1>
<p>Our data comes from the Stanford Education Data Archive (SEDA). The purpose of SEDA is to provide comprehensive, publicly available data on U.S. K-12 education academic research, policy analysis, and accountability purposes. It is commonly sourced from for the study of educational disparities, policy effectiveness, and the impact of various interventions.</p>
<p>The data is primarily gathered for academic research, policy analysis, and accountability purposes. Researchers utilize it to study educational disparities, policy effectiveness, and the impact of various interventions. Policymakers rely on this data to make informed decisions, allocate resources, and hold stakeholders accountable for student outcomes.</p>
</section>
<section id="our-datasets" class="level1">
<h1>Our Datasets</h1>
<section id="first-dataset" class="level2">
<h2 class="anchored" data-anchor-id="first-dataset">First Dataset</h2>
<p>Link to the original data source: https://edopportunity.org/get-the-data/seda-archive-downloads/</p>
<p>Link to <code>load_and_clean_data.R</code> file: <a href="dataset/cleaned_seda.rds">loading script</a></p>
<section id="data-files-and-variables" class="level3">
<h3 class="anchored" data-anchor-id="data-files-and-variables">Data Files and Variables</h3>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<caption>Description of Variables in the Dataset</caption>
<colgroup>
<col style="width: 17%">
<col style="width: 82%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Variable</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">District</td>
<td style="text-align: left;">Geographic school district</td>
</tr>
<tr class="even">
<td style="text-align: left;">Subject - RLA</td>
<td style="text-align: left;">Reading Language Arts test scores</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Subject - MTH</td>
<td style="text-align: left;">Math test scores</td>
</tr>
<tr class="even">
<td style="text-align: left;">Mn_score</td>
<td style="text-align: left;">Average test scores for the district</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Numstu</td>
<td style="text-align: left;">Number of students who took the test</td>
</tr>
<tr class="even">
<td style="text-align: left;">Per</td>
<td style="text-align: left;">Percentage of students in a particular grade</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Subgroups - All</td>
<td style="text-align: left;">All students</td>
</tr>
<tr class="even">
<td style="text-align: left;">Subgroups - Asn</td>
<td style="text-align: left;">Asian students</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Subgroups - Blk</td>
<td style="text-align: left;">Black students</td>
</tr>
<tr class="even">
<td style="text-align: left;">Subgroups - Fem</td>
<td style="text-align: left;">Female students</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Subgroups - Hsp</td>
<td style="text-align: left;">Hispanic students</td>
</tr>
<tr class="even">
<td style="text-align: left;">Subgroups - Male</td>
<td style="text-align: left;">Male students</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Subgroups - Mtr</td>
<td style="text-align: left;">Multiracial students</td>
</tr>
<tr class="even">
<td style="text-align: left;">Subgroups - Nec</td>
<td style="text-align: left;">Not economically disadvantaged students</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Subgroups - Ecd</td>
<td style="text-align: left;">Economically disadvantaged students</td>
</tr>
<tr class="even">
<td style="text-align: left;">Subgroups - Wht</td>
<td style="text-align: left;">White students</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Totenrl</td>
<td style="text-align: left;">Total number of students enrolled in a particular grade</td>
</tr>
<tr class="even">
<td style="text-align: left;">Unempall</td>
<td style="text-align: left;">Unemployment rate in the district</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Snapall</td>
<td style="text-align: left;">SNAP (Supplemental Nutrition Assistance Program) receipt rate in the district</td>
</tr>
<tr class="even">
<td style="text-align: left;">Single_momall</td>
<td style="text-align: left;">Rate of households with single mothers in the district</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="cleaning" class="level3">
<h3 class="anchored" data-anchor-id="cleaning">Cleaning</h3>
<ul>
<li>We cleaned our data before importing it, as it was 500mB. We kept the scores for each race and the locations, as we are most interested in those.</li>
<li>We downloaded the raw data and saved it in the data folder.</li>
<li>Utilized the dplyr package to:
<ul>
<li>Select relevant attributes for the project.</li>
<li>Remove unnecessary attributes.</li>
<li>Remove missing attributes.</li>
<li>Remove unusual values.</li>
<li>Utilized the collapse package to collapse selected variables into their mean, creating one observation per year, district, class subject, and state combination. Previously it was expanded into grade levels, and finding the mean across those for each year allowed for compression of the very large original data set. The cleaned data was exported to the data folder.</li>
</ul></li>
<li>Filter Massachusetts and Mississippi Dataset</li>
<li>Link to <code>load_and_clean_data.R</code> file: <a href="dataset/cleaned_seda.rds">loading script</a></li>
</ul>
</section>
<section id="summary-of-numerical-variables" class="level3">
<h3 class="anchored" data-anchor-id="summary-of-numerical-variables">Summary of numerical variables</h3>
<p>To begin, we wanted to make summary tables of MA and MS’s general descriptive statistics for the explanatory variables included in our data sets.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>

Table: Summary Statistics for Massachusetts

|Variable   |Description                                       |       Min|       Max|      Mean|    Median|
|:----------|:-------------------------------------------------|---------:|---------:|---------:|---------:|
|perecd     |Percentage of economically disadvantaged students | 0.0090090| 0.9237849| 0.2572312| 0.2106642|
|povertyall |Overall poverty rate                              | 0.0037677| 0.3341780| 0.0767193| 0.0633837|
|unempall   |Unemployment rate                                 | 0.0091265| 0.1654570| 0.0664401| 0.0634995|
|perblk     |Percentage of Black students                      | 0.0000000| 0.6057010| 0.0385408| 0.0187346|
|perasn     |Percentage of Asian students                      | 0.0000000| 0.4195884| 0.0416657| 0.0212570|
|perwht     |Percentage of White students                      | 0.0435475| 1.0000000| 0.8333210| 0.9021066|</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>

Table: Summary Statistics for Mississippi

|Variable   |Description                                       |       Min|       Max|      Mean|    Median|
|:----------|:-------------------------------------------------|---------:|---------:|---------:|---------:|
|perecd     |Percentage of economically disadvantaged students | 0.2112846| 1.0000000| 0.7251544| 0.7078702|
|povertyall |Overall poverty rate                              | 0.0676034| 0.4386482| 0.2239929| 0.2195274|
|unempall   |Unemployment rate                                 | 0.0344040| 0.2161760| 0.0985414| 0.0953619|
|perblk     |Percentage of Black students                      | 0.0230470| 1.0000000| 0.5447141| 0.5052691|
|perasn     |Percentage of Asian students                      | 0.0000000| 0.0581905| 0.0059577| 0.0026737|
|perwht     |Percentage of White students                      | 0.0000000| 0.9640693| 0.4193295| 0.4585892|</code></pre>
</div>
</div>
<p>By examining these histograms, we visually analyze the distribution of each variables. This visualization helps us understand the spread, central tendency, and potential outliers within the test scores across different racial groups and economic statuses.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="data_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="data_files/figure-html/unnamed-chunk-3-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="second-dataset-adding-more-variables" class="level2">
<h2 class="anchored" data-anchor-id="second-dataset-adding-more-variables">Second Dataset (Adding more variables)</h2>
<ul>
<li>Newly added key variables to the educational data: median income (log-transformed), parental education level, and poverty rate.</li>
<li>Data from the Stanford Education Data Archive (SEDA) enriches state-level analysis over time.</li>
<li>Rigorous data cleaning ensures analysis integrity by removing instances with missing values.</li>
<li>Meticulous merging aligns new variables with existing data by state and year.</li>
</ul>
<p>Link for the new dataset: https://edopportunity.org/get-the-data/seda-archive-downloads/ Link to <code>load_and_clean_data.R</code> file: <a href="dataset/cleaned_seda.rds">loading script</a></p>
<section id="data-files-and-variables-1" class="level3">
<h3 class="anchored" data-anchor-id="data-files-and-variables-1">Data Files and Variables</h3>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<caption>Description of Variables in the Dataset</caption>
<colgroup>
<col style="width: 15%">
<col style="width: 84%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Variable</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">lninc50all</td>
<td style="text-align: left;">Natural log of median income</td>
</tr>
<tr class="even">
<td style="text-align: left;">baplusall</td>
<td style="text-align: left;">Percentage of parents holding at least a Bachelor’s degree</td>
</tr>
<tr class="odd">
<td style="text-align: left;">povertyall</td>
<td style="text-align: left;">Overall poverty rate</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="summary-of-numerical-variables-1" class="level3">
<h3 class="anchored" data-anchor-id="summary-of-numerical-variables-1">Summary of numerical variables</h3>
<div class="cell">
<div class="cell-output-display">
<p><img src="data_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="data_files/figure-html/unnamed-chunk-5-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>

Table: Selected Summary Statistics for Massachusetts

|Variable   |Description                                                |        Min|        Max|       Mean|     Median|
|:----------|:----------------------------------------------------------|----------:|----------:|----------:|----------:|
|lninc50all |Natural log of median income                               | 10.3486640| 12.1182110| 11.2338139| 11.2229460|
|baplusall  |Percentage of parents holding at least a Bachelor's degree |  0.1080376|  0.8464119|  0.4117615|  0.3868308|
|povertyall |Overall poverty rate                                       |  0.0037677|  0.3341780|  0.0767193|  0.0633837|</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>

Table: Selected Summary Statistics for Mississippi

|Variable   |Description                                                |       Min|        Max|       Mean|     Median|
|:----------|:----------------------------------------------------------|---------:|----------:|----------:|----------:|
|lninc50all |Natural log of median income                               | 9.8578291| 11.2068380| 10.4684077| 10.4519910|
|baplusall  |Percentage of parents holding at least a Bachelor's degree | 0.0386911|  0.5401447|  0.1707087|  0.1499818|
|povertyall |Overall poverty rate                                       | 0.0676034|  0.4386482|  0.2239929|  0.2195274|</code></pre>
</div>
</div>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>